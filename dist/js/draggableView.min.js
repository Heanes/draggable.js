/*
 * draggableView - v1.0.0 - 2018-10-07 11:54:02 Sunday
 * https://github.com/heanes/draggableView.js
 * Copyright (c) 2018 Heanes
 * Licensed MIT License
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(z,d,l,e){var O="draggableView",E={setting:{dragViewContainer:'<div class="drag-view-container"></div>',dragViewIconContainer:'<div class="drag-view-icon-container"></div>'}};E.option={title:'<h2 class="content-title">title</h2>',width:e,height:e,minWidth:200,minHeight:200,maxWidth:e,maxHeight:e,top:e,left:e,language:"en-US",showMinMenu:!0,enableMin:!0,showMaxMenu:!0,enableMax:!0,showCloseMenu:!0,enableClose:!0,showStickMenu:!1,enableStick:!1,dbClickTitleBarToMax:!0,dragNearTopAutoMax:!0,escKey:!0,autoClose:!1,buttonHandlers:[],theme:"mac",showIcon:!1,icon:"",headerMenuOrder:["close","min","max"],headerMenu:{close:'<svg class="drag-icon" aria-hidden="true"><use xlink:href="#drag-icon-mac-close"></use></svg>',min:'<svg class="drag-icon" aria-hidden="true"><use xlink:href="#drag-icon-mac-min"></use></svg>',minRestore:'<svg class="drag-icon" aria-hidden="true"><use xlink:href="#drag-icon-mac-min"></use></svg>',max:'<svg class="drag-icon" aria-hidden="true"><use xlink:href="#drag-icon-mac-max"></use></svg>',maxRestore:'<svg class="drag-icon" aria-hidden="true"><use xlink:href="#drag-icon-mac-max"></use></svg>'},showStatusBar:!1,opacity:1,beforeClose:function(){},afterClose:function(){},beforeSetMin:function(){},afterSetMin:function(){},beforeSetMax:function(){},afterSetMax:function(){},beforeSetStick:function(){},afterSetStick:function(){},enableTabs:!1,enableDrag:!0,dragDirection:"all",dragRangeOffset:{top:100,bottom:100,left:100,right:100},dragRangePosition:{top:100,bottom:100,left:100,right:100},enableDirectionKeyToMove:!0,directionKeyDownToMoveOffset:1,enableResize:!0,resizeMinWidth:150,resizeMinHeight:150,resizeMaxWidth:500,resizeMaxHeight:500,resizeRangeOffset:{left:100,right:100,top:100,bottom:100},onWindowMove:e,dragWrap:{borderWidth:e,borderStyle:e,borderColor:e,boxShadow:e,borderRadius:e},dragHeaderWrap:{height:e,padding:e,bgColor:e,color:e,fontSize:e},dragBorder:{bgColor:""},dragContentWrap:{padding:e,bgColor:e,borderWidth:e},dratStatusWrap:{height:e}};var t={};t["zh-CN"]=t.cn={lang_dragOpMenuMinTitle:function(){return"最小化"},lang_dragOpMenuMinRestoreTitle:function(){return"恢复"},lang_dragOpMenuMaxTitle:function(){return"最大化"},lang_dragOpMenuMaxRestoreTitle:function(){return"恢复"},lang_dragOpMenuCloseTitle:function(){return"关闭"},lang_dragOpMenuPinTopTitle:function(){return"置顶"},lang_dragOpMenuPinTopRestoreTitle:function(){return"取消置顶"}},z.extend(E.option,t["zh-CN"]);var i=function(e,t){return this._defaults=this.getDefaultOption(),this.options=null,this.$element=null,this._name=O,this.version="v1.0.0",this.init(e,t),{options:this.options,init:z.proxy(this.init,this),remove:z.proxy(this.remove,this),setValue:z.proxy(this.setValue,this),test:z.proxy(this.test,this)}};function p(e,t){t.top&&e.css({top:t.top+"px"}),t.left&&e.css({left:t.left+"px"})}function g(e){var t=e[0],a="BODY"===t.tagName.toUpperCase(),r=t.getBoundingClientRect();null==r.width&&(r=z.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var i=d.SVGElement&&t instanceof d.SVGElement,o=a?{top:0,left:0}:i?null:e.offset(),n={scroll:a?l.documentElement.scrollTop||l.body.scrollTop:e.scrollTop()},s=a?{width:z(d).width(),height:z(d).height()}:null;return z.extend({},r,n,s,o)}function h(e){if(e)return{outerWidth:e.outerWidth(),outerHeight:e.outerHeight()}}function o(e){d.console&&d.console.error(e)}i.V=i.VERSION="1.0.0",i.DEFAULTS=E,i.LANGUAGES={},i.prototype.init=function(e,t){return this.$element=z(e),this.checkIsInitialized()||(this.$el_=this.$element.clone(!0),this.options=this.getOptions(t),this.initData(),this.initInElement(),this.initLanguage(),this.render(this.options)),this},i.prototype.initData=function(){return this.data={id:"",origin:{originContent:{width:0,height:0,top:0,left:0},dragWrap:{width:0,height:0,left:0,top:0}},dynamic:{dragFlag:!1,resizeFlag:!1,maxFlag:!1,minFlag:!1,stickFlag:!1,resizeBorderPlace:"",mouseDownMousePosition:{X:0,Y:0},mouseDownPosition:{left:0,top:0,width:0,height:0},currentPosition:{left:0,top:0,width:0,height:0},moveOffset:{offsetX:0,offsetY:0},moveOffsetTotal:{offsetX:0,offsetY:0},lastPosition:{top:0,left:0,width:0,height:0}}},this},i.prototype.initInElement=function(){return this.inElement={$originContent:e,$dragWrap:e,$dragHeaderWrap:e,$dragIconWrap:e,$dragTitleWrap:e,$dragHeaderOperateWrap:e,$dragOpMenuMin:e,$dragOpMenuMax:e,$dragOpMenuClose:e,$dragOpMenuPinUp:e,$dragGroupTabsWrap:e,$dragContentWrap:e,$dragOperateWrap:e,$dragBorderTop:e,$dragBorderBottom:e,$dragBorderLeft:e,$dragBorderRight:e,$dragBorderTopLeft:e,$dragBorderTopRight:e,$dragBorderBottomLeft:e,$dragBorderBottomRight:e,$dratStatusWrap:e},this},i.prototype.checkIsInitialized=function(e){return!!this.$element.hasClass("draggable-view-initialized")},i.prototype.initLanguage=function(){if(this.options.language){var e=z.fn.draggableView.languages,t=this.options.language.split(/[-_]/);t[0].toLowerCase(),t[1]&&t[1].toUpperCase(),e[this.options.language]?z.extend(this.options,e[this.options.language]):z.fn.draggableView.languages[t.join("-")]?z.extend(this.options,e[t.join("-")]):z.fn.draggableView.languages[t[0]]&&z.extend(this.options,e[t[0]])}},i.prototype.render=function(e){return this.buildDom(e),this.injectStyle(e),this.showStatusInfo(e),this.bindMouseEvent(e),this.bindWindowMoveEvent(e),this.bindKeyEvent(e),this},i.prototype.bindMouseEvent=function(a){var r=this,i=this.data.dynamic;return this.inElement.$dragWrap.on("click",function(){r.shareData.focusId!==r.dragUId&&(r.updateZIndex(a),r.shareData.focusId=r.dragUId)}),z(l).on("mousemove",function(e){var t=e||d.event;(a.enableDrag||a.enableResize)&&((i.dragFlag||i.resizeFlag)&&(i.moveOffset.offsetX=t.clientX-i.mouseDownMousePosition.X,i.moveOffset.offsetY=t.clientY-i.mouseDownMousePosition.Y,r.preventTextSelectable()),r.mouseMoveToDrag(a),r.mouseMoveToResize(a))}),z(l).on("mouseup",function(){a.enableDrag&&i.dragFlag&&(i.dragFlag=!1),a.enableResize&&i.resizeFlag&&(i.resizeFlag=!1),r.recoverTextSelectable()}),this.bindDrag(a),this.bindResize(a),this.bindMenuOperate(a),this},i.prototype.checkCanDrag=function(e){if(!e.enableDrag)return!1},i.prototype.checkCanResize=function(e){if(!e.enableResize)return!1},i.prototype.calculateMoveOffset=function(e){var t=this.data.origin,a=this.data.dynamic;a.moveOffsetTotal.offsetX=a.currentPosition.left-t.dragWrap.left,a.moveOffsetTotal.offsetY=a.currentPosition.top-t.dragWrap.top},i.prototype.bindWindowMoveEvent=function(t){var a=this;this.inElement.$dragWrap.on("move",function(e){a.calculateMoveOffset(t)}),"function"==typeof t.onWindowMove&&this.inElement.$dragWrap.on("move",this.options.onWindowMove)},i.prototype.bindDrag=function(r){if(!r.enableDrag)return this;var i=this,o=this.data.dynamic;return i.inElement.$dragHeaderWrap.on("mousedown",function(e){o.dragFlag=!0;var t=e||d.event;i.updateZIndex(r),o.mouseDownMousePosition.X=t.clientX,o.mouseDownMousePosition.Y=t.clientY;var a=g(i.inElement.$dragWrap);o.mouseDownPosition.left=a.left,o.mouseDownPosition.top=a.top}),this},i.prototype.mouseMoveToDrag=function(e){var t=this.data.dynamic;if(e.enableDrag&&t.dragFlag){"y"===e.dragDirection.toLowerCase()&&(t.moveOffset.offsetY=0),"x"===e.dragDirection.toLowerCase()&&(t.moveOffset.offsetX=0);var a={top:t.mouseDownPosition.top+t.moveOffset.offsetY,left:t.mouseDownPosition.left+t.moveOffset.offsetX};a.top<0&&(a.top=0),t.maxFlag&&(a.left=0),a.top<10&&!t.maxFlag&&e.enableMax&&(a.top=a.left=0,this.setMaxSize(e)),10<a.top&&t.maxFlag&&this.restoreLastSize(e),p(this.inElement.$dragWrap,a),t.currentPosition.top=a.top,t.currentPosition.left=a.left,this.inElement.$dragWrap.trigger("move"),this.showStatusInfo(e)}return this},i.prototype.bindResize=function(o){if(!o.enableResize)return this;var n=this,s=this.data.dynamic;return n.inElement.$dragBorder.on("mousedown",function(e){s.resizeFlag=!0,n.updateZIndex(o);var t=e||d.event,a=z(t.target);a.hasClass("drag-border-top")&&(s.resizeBorderPlace="top"),a.hasClass("drag-border-bottom")&&(s.resizeBorderPlace="bottom"),a.hasClass("drag-border-left")&&(s.resizeBorderPlace="left"),a.hasClass("drag-border-right")&&(s.resizeBorderPlace="right"),a.hasClass("drag-border-top-left")&&(s.resizeBorderPlace="top-left"),a.hasClass("drag-border-top-right")&&(s.resizeBorderPlace="top-right"),a.hasClass("drag-border-bottom-left")&&(s.resizeBorderPlace="bottom-left"),a.hasClass("drag-border-bottom-right")&&(s.resizeBorderPlace="bottom-right"),s.mouseDownMousePosition.X=t.clientX,s.mouseDownMousePosition.Y=t.clientY;var r=g(n.inElement.$dragWrap);s.mouseDownPosition.left=r.left,s.mouseDownPosition.top=r.top;var i=h(n.inElement.$dragWrap);s.currentPosition.width=i.outerWidth,s.currentPosition.height=i.outerHeight}),n},i.prototype.mouseMoveToResize=function(e){var t,a,r=this.data.dynamic;if(e.enableResize&&r.resizeFlag){var i={},o={},n=!1,s=r.moveOffset,d=s.offsetX,l=s.offsetY;"top-left"!==r.resizeBorderPlace&&"top-right"!==r.resizeBorderPlace&&"bottom-left"!==r.resizeBorderPlace&&"bottom-right"!==r.resizeBorderPlace||(n=!0),(n||"top"===r.resizeBorderPlace||"bottom"===r.resizeBorderPlace)&&("top"!==r.resizeBorderPlace&&"top-left"!==r.resizeBorderPlace&&"top-right"!==r.resizeBorderPlace||(l=0-l),o.height=r.currentPosition.height+l,"top"!==r.resizeBorderPlace&&"top-left"!==r.resizeBorderPlace&&"top-right"!==r.resizeBorderPlace||(i.top=r.mouseDownPosition.top+s.offsetY)),(n||"left"===r.resizeBorderPlace||"right"===r.resizeBorderPlace||"bottom-left"===r.resizeBorderPlace)&&("left"!==r.resizeBorderPlace&&"top-left"!==r.resizeBorderPlace&&"bottom-left"!==r.resizeBorderPlace||(d=0-d),o.width=r.currentPosition.width+d,"left"!==r.resizeBorderPlace&&"top-left"!==r.resizeBorderPlace&&"bottom-left"!==r.resizeBorderPlace||(i.left=r.mouseDownPosition.left+s.offsetX)),"top"!==r.resizeBorderPlace&&"left"!==r.resizeBorderPlace&&"top-left"!==r.resizeBorderPlace&&"top-right"!==r.resizeBorderPlace&&"bottom-left"!==r.resizeBorderPlace||p(this.inElement.$dragWrap,i),t=this.inElement.$dragWrap,(a=o)&&(a.width&&t.css({width:a.width}),a.height&&t.css({height:a.height})),r.maxFlag&&(r.maxFlag=!1),this.showStatusInfo(e)}return this},i.prototype.setMaxSize=function(e){e=e||this.getOptions();var t=this.data.dynamic,a=z(d),r={width:a.width(),height:a.height()};t.minFlag||(t.lastPosition=this.getElementPosition(this.inElement.$dragWrap),console.log("dynamic.lastPosition",t.lastPosition)),this.inElement.$dragWrap.removeClass("drag-min-size").addClass("drag-max-size").css({top:0,left:0,width:r.width,height:r.height}),this.inElement.$dragOpMenuMax.empty().append(e.headerMenu.maxRestore).attr("title",this.options.lang_dragOpMenuMaxRestoreTitle()),t.minFlag&&this.inElement.$dragOpMenuMin.empty().append(e.headerMenu.min).attr("title",this.options.lang_dragOpMenuMinTitle()),t.minFlag=!1,t.maxFlag=!0},i.prototype.setMinSize=function(e){e=e||this.getOptions();var t=this.data.dynamic,a=this.data.origin;t.maxFlag||(t.lastPosition=this.getElementPosition(this.inElement.$dragWrap)),this.inElement.$dragWrap.removeClass("drag-max-size").addClass("drag-min-size").css({top:"unset",bottom:"10px",left:"10px",width:"200px",height:a.dragHeaderWrap.height+2}),this.inElement.$dragOpMenuMin.empty().append(e.headerMenu.minRestore).attr("title",this.options.lang_dragOpMenuMinRestoreTitle()),this.shareData.minList.push(this.dragUId),t.maxFlag&&this.inElement.$dragOpMenuMax.empty().append(e.headerMenu.max).attr("title",this.options.lang_dragOpMenuMaxTitle()),t.maxFlag=!1,t.minFlag=!0},i.prototype.restoreLastSize=function(e){var t=this.data.dynamic;t.maxFlag=!1,t.minFlag=!1,console.log("dynamic.lastPosition",t.lastPosition),this.inElement.$dragWrap.css({top:t.lastPosition.top,left:t.lastPosition.left,width:t.lastPosition.width,height:t.lastPosition.height}).removeClass("drag-min-size").removeClass("drag-max-size"),this.inElement.$dragOpMenuMin.empty().append(e.headerMenu.min).attr("title",this.options.lang_dragOpMenuMinTitle()),this.inElement.$dragOpMenuMax.empty().append(e.headerMenu.max).attr("title",this.options.lang_dragOpMenuMaxTitle())},i.prototype.bindMenuOperate=function(e){var t=this,a=t.data.dynamic;return e.enableClose&&this.inElement.$dragOpMenuClose.on("click",function(){t.inElement.$dragWrap.remove()}),e.enableMin&&this.inElement.$dragOpMenuMin.on("click",function(){a.minFlag?t.restoreLastSize(e):t.setMinSize(e)}),e.enableMax&&this.inElement.$dragOpMenuMax.on("click",function(){a.maxFlag?t.restoreLastSize(e):t.setMaxSize(e)}),this.inElement.$dragHeaderWrap.dblclick(function(){a.maxFlag?t.restoreLastSize(e):t.setMaxSize(e)}),this},i.prototype.bindKeyEvent=function(r){if(!r.enableDirectionKeyToMove||r.directionKeyDownToMoveOffset<=0)return this;var i=this,o=this.data.dynamic;return z(l).on("keydown",function(e){var t=e||d.event;38===t.keyCode&&(o.dragFlag=!0,o.moveOffset.offsetY=-r.directionKeyDownToMoveOffset,o.moveOffset.offsetX=0,i.mouseMoveToDrag(r)),40===t.keyCode&&(o.moveOffset.offsetY=r.directionKeyDownToMoveOffset,o.moveOffset.offsetX=0,o.dragFlag=!0,i.mouseMoveToDrag(r)),37===t.keyCode&&(o.dragFlag=!0,o.moveOffset.offsetX=-r.directionKeyDownToMoveOffset,o.moveOffset.offsetY=0,i.mouseMoveToDrag(r)),39===t.keyCode&&(o.dragFlag=!0,o.moveOffset.offsetX=r.directionKeyDownToMoveOffset,o.moveOffset.offsetY=0,i.mouseMoveToDrag(r));var a=g(i.inElement.$dragWrap);o.currentPosition.left=a.left,o.currentPosition.top=a.top}),z(l).on("keyup",function(e){var t=e||d.event;37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode||(o.dragFlag=!1)}),this},i.prototype.calculateOriginSize=function(e){var t=this.data.origin,a=(this.data.dynamic,g(this.$element)),r=h(this.$element);t.originContent={width:r.outerWidth,height:r.outerHeight,top:a.top,left:a.left}},i.prototype.calculateRenderSize=function(e){var t=this.data.origin,a=this.data.dynamic,r=t.originContent.width,i=t.originContent.height;return t.dragContentWrap={width:r,height:i},t.dragHeaderWrap={width:t.dragContentWrap.width,height:parseInt(e.dragHeaderWrap.height?e.dragHeaderWrap.height:h(this.inElement.$dragHeaderWrap).outerHeight)},t.dratStatusWrap={width:r,height:parseInt(e.dratStatusWrap.height?e.dratStatusWrap.height:h(this.inElement.$dratStatusWrap).outerHeight)},t.dragWrap={width:parseInt(e.width?e.width:t.dragContentWrap.width),height:parseInt(e.height?e.height:t.dragContentWrap.height),top:t.originContent.top,left:t.originContent.left},a.currentPosition.top=t.dragWrap.top,a.currentPosition.left=t.dragWrap.left,this},i.prototype.buildDom=function(a){var e=z(this.template.dragWrap),t=z(this.template.dragWindowMoveShade),r=z(this.template.dragMousePreventDefault),i=z(this.template.dragHeaderWrap),o=z(this.template.dragIconWrap),n=z(this.template.dragTitleWrap),s=z(this.template.dragHeaderOperateWrap),d=z(this.template.dragOpMenuMin).attr("title",this.options.lang_dragOpMenuMinTitle()),l=z(this.template.dragOpMenuMax).attr("title",this.options.lang_dragOpMenuMaxTitle()),p=z(this.template.dragOpMenuClose).attr("title",this.options.lang_dragOpMenuCloseTitle()),g=z(this.template.dragGroupTabsWrap),h=z(this.template.dragContentWrap),u=z(this.template.dragOperateWrap),c=z(this.template.dragBorderTop),f=z(this.template.dragBorderBottom),m=z(this.template.dragBorderLeft),v=z(this.template.dragBorderRight),b=z(this.template.dragBorderTopLeft),M=z(this.template.dragBorderTopRight),w=z(this.template.dragBorderBottomLeft),x=z(this.template.dragBorderBottomRight),W=z(this.template.dratStatusWrap),y=z(this.template.dratStatusBar);this.calculateOriginSize(a),z.each(a.headerMenuOrder,function(e,t){"close"===t.toLowerCase()&&a.showCloseMenu&&s.append(p.append(a.headerMenu.close)),"min"===t.toLowerCase()&&a.showMinMenu&&s.append(d.append(a.headerMenu.min)),"max"===t.toLowerCase()&&a.showMaxMenu&&s.append(l.append(a.headerMenu.max))}),a.showIcon&&i.append(o.append(this.options.icon)),i.append(n.append(this.options.title)),i.append(s),u.append(i).append(b).append(c).append(M).append(m).append(v).append(w).append(f).append(x),this.data.id=this.dragUId=this.getUID(O)+"",this.$element.after('<div class="drag-view-place" id="dragPlace'+this.data._id+'" style="display:none"></div>'),e.attr("id",this.dragUId);var $=this.shareData.$dragViewContainer=this.shareData.$dragViewContainer||z(E.setting.dragViewContainer);return z("body").append($),$.append(e),h.append(this.$element),e.prepend(i),e.append(h),e.append(u),a.showStatusBar&&e.append(W.append(y)),e.append(r),e.append(t),this.inElement.$dragWrap=e,this.inElement.$originContent=this.$element,this.inElement.$dragMousePreventDefault=r,this.inElement.$dragWindowMoveShade=t,this.inElement.$dragHeaderWrap=i,this.inElement.$dragIconWrap=o,this.inElement.$dragTitleWrap=n,this.inElement.$dragHeaderOperateWrap=s,this.inElement.$dragOpMenuMin=d,this.inElement.$dragOpMenuMax=l,this.inElement.$dragOpMenuClose=p,this.inElement.$dragGroupTabsWrap=g,this.inElement.$dragContentWrap=h,this.inElement.$dragOperateWrap=u,this.inElement.$dragBorder=this.inElement.$dragWrap.find(".drag-border"),this.inElement.$dragBorderTop=c,this.inElement.$dragBorderBottom=f,this.inElement.$dragBorderLeft=m,this.inElement.$dragBorderRight=v,this.inElement.$dragBorderTopLeft=b,this.inElement.$dragBorderTopRight=M,this.inElement.$dragBorderBottomLeft=w,this.inElement.$dragBorderBottomRight=x,this.inElement.$dratStatusWrap=W,this.inElement.$dragStatusInfo=y,this.inElement.$dragWrap.addClass(a.theme),this.initZIndex(a),this.calculateRenderSize(a),(this.shareData.dragViewList[this.dragUId]=this).shareData.focusId=this.shareData.focusId&&this.shareData.stickId!==this.shareData.focusId?this.shareData.stickId:this.dragUId,this.$dragWrap=this.inElement.$dragWrap,this},i.prototype.initZIndex=function(e){var t=this.shareData;t.stickId?(this.data.zIndex=t.maxZIndex,t.maxZIndex+=2,t.dragViewList[t.stickId].css("z-index",t.maxZIndex)):t.maxZIndex?(t.maxZIndex+=2,this.data.zIndex=t.maxZIndex):this.data.zIndex=t.maxZIndex=parseInt(this.inElement.$dragWrap.css("z-index")),this.inElement.$dragWrap.css("z-index",this.data.zIndex)},i.prototype.injectStyle=function(e){var t=this.data.origin;this.data.dynamic;this.inElement.$originContent.css({left:"unset",top:"unset"}),this.inElement.$dragContentWrap.css({border:e.dragContentWrap.borderWidth+" "+e.dragContentWrap.borderStyle+" "+e.dragContentWrap.borderColor,padding:e.dragContentWrap.padding,"background-color":e.dragContentWrap.bgColor}),this.inElement.$dragHeaderWrap.css({height:e.dragHeaderWrap.height,color:e.dragHeaderWrap.color,"background-color":e.dragHeaderWrap.bgColor}),this.inElement.$dragBorder.css({"background-color":e.dragBorder.bgColor}),this.inElement.$dragWrap.css({left:t.dragWrap.left+"px",top:t.dragWrap.top+"px",width:t.dragWrap.width+"px",height:t.dragWrap.height+"px",border:e.dragWrap.borderWidth+" "+e.dragWrap.borderStyle+" "+e.dragWrap.borderColor,"border-radius":e.dragWrap.borderRadius,"box-shadow":e.dragWrap.boxShadow,opacity:e.opacity});var a=this.inElement.$dragWrap.find("div");a.eq(0).css({"border-top-left-radius":e.dragWrap.borderRadius,"border-top-right-radius":e.dragWrap.borderRadius}),a.eq(a.length-1).css({"border-top-left-radius":e.dragWrap.borderRadius,"border-top-right-radius":e.dragWrap.borderRadius})},i.prototype.updateZIndex=function(e){var t=this.shareData,a=t.dragViewList;if(this.shareData.focusId!==this.dragUId){for(var r in a)if(a.hasOwnProperty(r)){var i=a[r];if(r!==this.dragUId){var o=parseInt(i.$dragWrap.css("z-index"));o>this.data.zIndex&&(i.data.zIndex=o-2,i.$dragWrap.css("z-index",i.data.zIndex))}}this.data.zIndex=t.maxZIndex}this.inElement.$dragWrap.css("z-index",this.data.zIndex)},i.prototype.setStick=function(e){for(var t=0,a=this.shareData.dragViewList.length;t<a;t++);},i.prototype.shareData={$dragViewContainer:e,focusId:e,stickId:e,maxZIndex:e,minList:[],dragViewList:{}},i.prototype.getUID=function(e){for(this.data._id=0;e+=this.data._id=~~(1e6*Math.random()),l.getElementById(e););return e},i.prototype.showStatusInfo=function(e){if(!e.showStatusBar)return this;var t=this.inElement.$dragStatusInfo,a=this.data.dynamic,r='<span class="info-item move-current-position-info"><span class="field">x :</span><span class="value">'+a.currentPosition.left+'<span><span class="field">y :</span><span class="value">'+a.currentPosition.top+"</span></span>",i='<span class="info-item move-offset-info"><span class="field">x :</span><span class="value">'+a.moveOffset.offsetY+'<span><span class="field">y :</span><span class="value">'+a.moveOffset.offsetX+"</span></span>";t.empty().append(r).append(i)},i.prototype.getElementPosition=function(e){var t=(e=e||this.$element)[0],a="BODY"===t.tagName.toUpperCase(),r=t.getBoundingClientRect();null==r.width&&(r=z.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var i=d.SVGElement&&t instanceof d.SVGElement,o=a?{top:0,left:0}:i?null:e.offset(),n={scroll:a?l.documentElement.scrollTop||l.body.scrollTop:e.scrollTop()},s=a?{width:z(d).width(),height:z(d).height()}:null;return z.extend({},r,n,s,o)},i.prototype.preventTextSelectable=function(){this.inElement.$dragMousePreventDefault.show(),this.inElement.$dragWindowMoveShade.show()},i.prototype.recoverTextSelectable=function(){this.inElement.$dragMousePreventDefault.hide(),this.inElement.$dragWindowMoveShade.hide()},i.prototype.template={dragWrap:'<div class="drag-wrap">',dragHeaderWrap:'<div class="drag-header-wrap"></div>',dragIconWrap:'<div class="drag-icon-wrap"></div>',dragTitleWrap:'<div class="drag-title-wrap"></div>',dragHeaderOperateWrap:'<div class="drag-header-operate-wrap"></div>',dragOpMenuMin:'<div class="drag-op-btn drag-op-menu-min"></div>',dragOpMenuMax:'<div class="drag-op-btn drag-op-menu-max"></div>',dragOpMenuClose:'<div class="drag-op-btn drag-op-menu-close"></div>',dragOpMenuPinTop:'<div class="drag-op-btn drag-op-menu-pin-top"></div>',dragGroupTabsWrap:'<div class="drag-group-tabs-wrap"></div>',dragContentWrap:'<div class="drag-content-wrap">',dragOperateWrap:'<div class="drag-operate-wrap"></div>',dragBorderTop:'<div class="drag-border drag-border-top"></div>',dragBorderBottom:'<div class="drag-border drag-border-bottom"></div>',dragBorderLeft:'<div class="drag-border drag-border-left"></div>',dragBorderRight:'<div class="drag-border drag-border-right"></div>',dragBorderTopLeft:'<div class="drag-border drag-border-top-left"></div>',dragBorderTopRight:'<div class="drag-border drag-border-top-right"></div>',dragBorderBottomLeft:'<div class="drag-border drag-border-bottom-left"></div>',dragBorderBottomRight:'<div class="drag-border drag-border-bottom-right"></div>',dratStatusWrap:'<div class="drag-status-wrap"></div>',dratStatusBar:'<div class="drag-status-bar"></div>',dragWindowMoveShade:'<div class="drag-window-move-shade"></div>',dragMousePreventDefault:'<div class="drag-mouse-preventDefault"></div>'},i.prototype.getOptions=function(e){return this.handleToStandardOption(e)},i.prototype.handleToStandardOption=function(e){var t=this.getDefaultOption().option;return e=z.extend({},t,this.$element.data(),e)},i.prototype.refreshOption=function(e){return this.options=z.extend(!0,{},this.options,e),this.getOptions(this.options),this.destroy(),this.init(),this},i.prototype.destroy=function(){return this.$element.html(this.$el_.html()),this},i.prototype.getDefaultOption=function(){return i.DEFAULTS},z.fn[O]=function(t,a){var r=e;return this.each(function(){var e=z.data(this,O);"string"==typeof t?e?z.isFunction(e[t])&&"_"!==t.charAt(0)?(a instanceof Array||(a=[a]),r=e[t].apply(e,a)):o("No such method : "+t):o("Not initialized, can not call method : "+t):"boolean"==typeof t?r=e:z.data(this,O,new i(this,z.extend(!0,{},t)))}),r||this},z.fn.draggableView.Constructor=i,z.fn.draggableView.defaults=i.DEFAULTS,z.fn.draggableView.languages=i.LANGUAGES}(jQuery,window,document);
//# sourceMappingURL=draggableView.js.map